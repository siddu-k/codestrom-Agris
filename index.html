<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Galactic Horizon | Welcome</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <link rel="stylesheet" href="style.css">
    <style>
        /* CRITICAL FIX: Ensure full height so background renders */
        html,
        body {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            overflow-y: auto;
            /* Enable vertical scroll */
            background-color: #0f172a;
            /* Force Slate-900 */
            background: radial-gradient(circle at center, #1e293b 0%, #0f172a 100%);
        }

        #ui-layer {
            transition: opacity 2s ease-in-out;
            opacity: 0;
            position: absolute;
            /* Keeps it in the first fold */
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            pointer-events: none;
            /* Let scroll pass through empty areas */
            z-index: 10;
        }

        .visible {
            opacity: 1 !important;
        }

        .scifi-glow {
            text-shadow: 0 0 20px rgba(59, 130, 246, 0.6);
        }

        #canvas-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
            /* FIX: Allow click/scroll to pass through to body */
        }

        /* Content Layer that Scrolls Over */
        #content-layer {
            position: relative;
            z-index: 20;
            margin-top: 100vh;
            /* Start below the fold */
            /* Start below the fold */
            background: linear-gradient(to bottom, transparent 0%, rgba(30, 41, 59, 0.95) 20%, #0f172a 100%);
            min-height: 100vh;
            padding-top: 100px;
            padding-bottom: 100px;
        }

        /* Hide Scrollbar but keep functionality */
        ::-webkit-scrollbar {
            display: none;
        }

        body {
            -ms-overflow-style: none;
            /* IE and Edge */
            scrollbar-width: none;
            /* Firefox */
        }
    </style>
</head>

<body>

    <!-- Background Grid -->
    <div class="grid-overlay"></div>

    <!-- 3D Container (Fixed) -->
    <div id="canvas-container"></div>

    <!-- UI Overlay (Fixed to 1st Screen) -->
    <div id="ui-layer" class="flex items-center pl-10 md:pl-20 pointer-events-none">
        <div class="pointer-events-auto max-w-xl">
            <!-- Glass Card -->
            <div
                class="bg-slate-900/60 backdrop-blur-xl border-l-4 border-blue-500 p-8 rounded-r-3xl border-y border-r border-white/10 relative overflow-hidden group">
                <div
                    class="absolute top-0 right-0 w-20 h-20 bg-blue-500/10 rounded-full blur-2xl -mr-10 -mt-10 transition-all group-hover:bg-blue-500/20">
                </div>

                <div class="flex items-center gap-3 mb-4">
                    <div class="h-px w-8 bg-blue-500"></div>
                    <span class="text-[10px] text-blue-400 font-mono tracking-[0.3em] uppercase">System Online</span>
                </div>

                <h1 class="text-7xl font-black text-white leading-[0.9] tracking-tighter mb-4 mix-blend-overlay">
                    GALACTIC<br>
                    <span
                        class="text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-cyan-300 scifi-glow">HORIZON</span>
                </h1>

                <p class="text-slate-400 text-sm leading-relaxed mb-8 font-light border-l border-white/10 pl-4">
                    Advanced geospatial research and planetary coordinate analysis hub.
                    <br><span class="text-slate-500">Initializing orbital data stream...</span>
                </p>

                <div class="flex items-center gap-6">
                    <a href="dashboard.html"
                        class="relative overflow-hidden group bg-blue-600 hover:bg-blue-500 text-white font-bold py-4 px-8 rounded-lg transition-all transform hover:scale-105 hover:shadow-[0_0_40px_rgba(37,99,235,0.4)]">
                        <div
                            class="absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300 transform skew-y-12">
                        </div>
                        <span class="relative flex items-center gap-2 tracking-widest text-xs">
                            ENTER COMMAND
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M14 5l7 7m0 0l-7 7m7-7H3"></path>
                            </svg>
                        </span>
                    </a>
                </div>
            </div>
        </div>

        <!-- Scroll Indicator -->
        <div class="absolute bottom-10 left-1/2 -translate-x-1/2 text-center animate-bounce">
            <p class="text-[10px] text-slate-500 uppercase tracking-widest mb-2">Scroll for Intel</p>
            <svg class="w-6 h-6 text-blue-500 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3">
                </path>
            </svg>
        </div>
    </div>

    <!-- Scrolling Content Layer -->
    <div id="content-layer">
        <div class="max-w-7xl mx-auto px-6 md:px-12 text-white">

            <!-- Hero Text -->
            <div class="mb-16 max-w-3xl">
                <h2
                    class="text-5xl font-black mb-6 bg-clip-text text-transparent bg-gradient-to-r from-white via-blue-200 to-slate-500 tracking-tight">
                    ORBITAL INTELLIGENCE<br>FOR TERRESTRIAL GROWTH
                </h2>
                <div class="h-1 w-24 bg-blue-600 rounded-full mb-6"></div>
                <p class="text-slate-400 text-lg leading-relaxed font-light">
                    Galactic Horizon isn't just a dashboard; it's a <strong class="text-white">planetary operating
                        system</strong>.
                    We fuse satellite imagery, generative AI, and real-time climate telemetry to decode the complexities
                    of our world.
                    From precision geospatial analysis to environmental monitoring, we turn data into <strong
                        class="text-white">decisive action</strong>.
                </p>
            </div>

            <!-- 4-Grid Feature Cards -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">

                <!-- Card 1: Mapping -->
                <div
                    class="bg-white/10 backdrop-blur-md border border-white/10 p-6 rounded-2xl hover:bg-white/20 transition-all hover:-translate-y-1 duration-300 group cursor-default">
                    <div
                        class="w-12 h-12 bg-blue-500/10 rounded-xl flex items-center justify-center mb-4 group-hover:bg-blue-500/20 transition-colors">
                        <svg class="w-6 h-6 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z">
                            </path>
                        </svg>
                    </div>
                    <h3 class="font-bold text-lg mb-2 text-blue-100">Interactive 3D Earth Mapping</h3>
                    <p class="text-xs text-slate-400 leading-relaxed">Draw and analyze land parcels directly on a stunning 3D globe. Select any region worldwide with precision polygon tools and get instant geographic coordinates for spatial research and analysis.</p>
                </div>

                <!-- Card 2: AI -->
                <div
                    class="bg-white/10 backdrop-blur-md border border-white/10 p-6 rounded-2xl hover:bg-white/20 transition-all hover:-translate-y-1 duration-300 group cursor-default">
                    <div
                        class="w-12 h-12 bg-purple-500/10 rounded-xl flex items-center justify-center mb-4 group-hover:bg-purple-500/20 transition-colors">
                        <svg class="w-6 h-6 text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                        </svg>
                    </div>
                    <h3 class="font-bold text-lg mb-2 text-purple-100">AI-Powered Land Analysis</h3>
                    <p class="text-xs text-slate-400 leading-relaxed">Advanced LLMs analyze soil composition, climate patterns, and local environmental conditions to provide comprehensive geographical insights. Get instant, data-driven land assessment reports.</p>
                </div>

                <!-- Card 3: Climate -->
                <div
                    class="bg-white/10 backdrop-blur-md border border-white/10 p-6 rounded-2xl hover:bg-white/20 transition-all hover:-translate-y-1 duration-300 group cursor-default">
                    <div
                        class="w-12 h-12 bg-cyan-500/10 rounded-xl flex items-center justify-center mb-4 group-hover:bg-cyan-500/20 transition-colors">
                        <svg class="w-6 h-6 text-cyan-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z">
                            </path>
                        </svg>
                    </div>
                    <h3 class="font-bold text-lg mb-2 text-cyan-100">Live Weather Monitoring</h3>
                    <p class="text-xs text-slate-400 leading-relaxed">Access real-time meteorological data including temperature, precipitation, wind patterns, and atmospheric conditions for any location. Make informed decisions based on current weather.</p>
                </div>

                <!-- Card 4: History -->
                <div
                    class="bg-white/10 backdrop-blur-md border border-white/10 p-6 rounded-2xl hover:bg-white/20 transition-all hover:-translate-y-1 duration-300 group cursor-default">
                    <div
                        class="w-12 h-12 bg-emerald-500/10 rounded-xl flex items-center justify-center mb-4 group-hover:bg-emerald-500/20 transition-colors">
                        <svg class="w-6 h-6 text-emerald-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01">
                            </path>
                        </svg>
                    </div>
                    <h3 class="font-bold text-lg mb-2 text-emerald-100">Comprehensive Land Reports</h3>
                    <p class="text-xs text-slate-400 leading-relaxed">Generate detailed analysis reports for your selected areas. All your field data, crop recommendations, and climate insights are saved locally for offline access anytime.</p>
                </div>

            </div>

            <!-- Bottom CTA -->
            <div class="mt-16 text-center">
                <a href="dashboard.html"
                    class="inline-flex items-center gap-3 bg-white text-black px-8 py-4 rounded-full font-bold hover:scale-105 transition-transform">
                    <span>Initiate System</span>
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M14 5l7 7m0 0l-7 7m7-7H3"></path>
                    </svg>
                </a>
            </div>

        </div>
    </div>

    <!-- MAIN JS LOGIC -->
    <script>
        let scene, camera, renderer, globe, clouds, stars, controls;
        let time = 0;

        const planetData = {
            earth: { tex: 'earth_atmos_2048.jpg', size: 5, atmos: true, color: 0x2f81f7 },
        };

        let introComplete = false;
        // FINAL POSITION: Centered Y=0, Zoomed In Z=20
        const targetPos = new THREE.Vector3(0, 0, 20);

        function init() {
            scene = new THREE.Scene();

            camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 2000);

            const w = window.innerWidth;
            const h = window.innerHeight;

            // Apply Offset: Shift viewport so Earth appears on Right
            if (w > 768) {
                camera.setViewOffset(w, h, -(w * 0.25), 0, w, h);
            }

            // START POSITION: 
            // Y=0 to match targetPos.y=0. This prevents "moving up/down".
            // Z=1200 starts VERY far away for a dramatic zoom.
            camera.position.set(0, 0, 1200);

            // RENDERER FIX: Explicit alpha and black clear color
            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setClearColor(0x000000, 0);
            renderer.setSize(w, h);
            // CLARITY: Use full device pixel ratio
            renderer.setPixelRatio(window.devicePixelRatio);
            document.getElementById('canvas-container').appendChild(renderer.domElement);

            // Disable interactive controls to allow page scrolling
            // The globe will rotate via animation loop

            // Lights - Brighter for clarity

            // Lights - Brighter for clarity
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
            scene.add(ambientLight);

            const pointLight = new THREE.PointLight(0xffffff, 1.5);
            pointLight.position.set(20, 20, 20);
            scene.add(pointLight);

            createGlobe('earth');
            createStars();

            window.addEventListener('resize', onResize);
            animate();
        }

        function createGlobe(key) {
            const p = planetData[key];
            const geometry = new THREE.SphereGeometry(p.size, 128, 128);
            const loader = new THREE.TextureLoader();
            const texture = loader.load(`https://raw.githubusercontent.com/mrdoob/three.js/master/examples/textures/planets/${p.tex}`);

            // CLARITY: Max Anisotropy
            texture.anisotropy = renderer.capabilities.getMaxAnisotropy();

            globe = new THREE.Mesh(geometry, new THREE.MeshPhongMaterial({
                map: texture,
                shininess: 15,
                specular: new THREE.Color(0x333333)
            }));
            scene.add(globe);

            if (p.atmos) {
                const cloudGeo = new THREE.SphereGeometry(p.size * 1.01, 128, 128);
                const cloudTex = loader.load('https://raw.githubusercontent.com/mrdoob/three.js/master/examples/textures/planets/earth_clouds_1024.png');
                clouds = new THREE.Mesh(cloudGeo, new THREE.MeshPhongMaterial({ map: cloudTex, transparent: true, opacity: 0.4 }));
                scene.add(clouds);
            }
        }

        function createStars() {
            const starCount = 15000;
            const geo = new THREE.BufferGeometry();
            const pos = new Float32Array(starCount * 3);
            const sizes = new Float32Array(starCount);

            for (let i = 0; i < starCount * 3; i++) {
                pos[i] = (Math.random() - 0.5) * 2000; // Increased spread
                if (i % 3 === 0) sizes[i / 3] = Math.random();
            }

            geo.setAttribute('position', new THREE.BufferAttribute(pos, 3));
            geo.setAttribute('size', new THREE.BufferAttribute(sizes, 1));

            const mat = new THREE.PointsMaterial({
                size: 1,
                color: 0xffffff,
                transparent: true,
                opacity: 0.8
            });

            stars = new THREE.Points(geo, mat);
            scene.add(stars);
        }

        function onResize() {
            const w = window.innerWidth;
            const h = window.innerHeight;

            // Re-apply offsets on resize
            camera.aspect = w / h;
            camera.clearViewOffset();
            if (w > 768) {
                camera.setViewOffset(w, h, -(w * 0.25), 0, w, h);
            }

            camera.updateProjectionMatrix();
            renderer.setSize(w, h);
        }

        function animate() {
            requestAnimationFrame(animate);
            time += 0.005;

            // Rotation
            if (clouds) clouds.rotation.y += 0.0003;
            if (globe) globe.rotation.y += 0.0001;
            if (stars) stars.rotation.y -= 0.0002; // RESTORED: Starfield rotation

            if (!introComplete) {
                // Smooth Intro Zoom
                camera.position.lerp(targetPos, 0.03);

                // When close enough, snap and switch to orbit
                if (camera.position.distanceTo(targetPos) < 0.5) {
                    introComplete = true;
                    // camera.position.copy(targetPos);
                    document.getElementById('ui-layer').classList.add('visible');
                }
            } else {
                // Manual Orbit
                const dist = 20;
                // Add an offset to 'time' so it starts smoothly from where we are roughly
                camera.position.x = dist * Math.sin(time * 0.2);
                camera.position.z = dist * Math.cos(time * 0.2);
                camera.lookAt(0, 0, 0);
            }

            renderer.render(scene, camera);
        }

        window.onload = init;
    </script>
</body>

</html>